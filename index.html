<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audit Rapide P√©nurie Talents | Homieux Media</title>
    <link href="https://fonts.googleapis.com/css2?family=Epilogue:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --primary-blue: #0056b3; 
            --accent-pink: #ED51C2;
            --bg-white: #f0f4f8; 
            --text-dark: #000442;
            --text-muted: #64748b;
            --gray-light: #FFFFFF;
            --border-color: #E2E8F0;
            --shadow-premium: 0 20px 50px -12px rgba(0, 86, 179, 0.1);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { box-sizing: border-box; -webkit-font-smoothing: antialiased; }

        body {
            font-family: 'Epilogue', Arial, Helvetica, sans-serif;
            margin: 0; padding: 0;
            color: var(--text-dark);
            background-color: var(--bg-white);
            line-height: 1.7;
            text-align: center;
        }

        header { padding: 40px 5%; display: flex; justify-content: center; align-items: center; }
        .logo { height: 44px; cursor: pointer; transition: var(--transition); }
        .logo:hover { opacity: 0.8; transform: translateY(-1px); }

        .container { max-width: 800px; margin: 0 auto 80px auto; padding: 0 24px; }

        .card {
            background: white; padding: 60px 40px; border-radius: 12px;
            box-shadow: var(--shadow-premium); border: 1px solid var(--border-color);
            transition: var(--transition); display: flex; flex-direction: column; align-items: center;
        }

        h1 { color: var(--primary-blue); font-size: 2.2rem; font-weight: 700; margin-bottom: 16px; letter-spacing: -0.02em; line-height: 1.2; }
        p.subtitle { color: var(--text-muted); font-size: 1.1rem; margin-bottom: 40px; max-width: 550px; }

        .stat-box {
            background: #f8fafc; padding: 20px; border-radius: 8px;
            border-left: 4px solid var(--primary-blue); font-size: 0.9rem;
            margin: 24px 0; text-align: center; width: 100%; color: var(--text-muted);
        }
        .stat-box strong { color: var(--primary-blue); display: block; margin-bottom: 4px; text-transform: uppercase; font-size: 0.75rem; }

        .btn-group { display: flex; gap: 16px; margin-top: 32px; width: 100%; justify-content: center; }

        button, .btn-main {
            font-family: 'Epilogue', sans-serif; padding: 18px 32px; border-radius: 6px;
            cursor: pointer; font-weight: 600; transition: var(--transition); font-size: 1rem;
            border: 1px solid var(--primary-blue);
        }

        .btn-option { background: white; color: var(--primary-blue); flex: 1; max-width: 160px; }
        .btn-option:hover { background: var(--primary-blue); color: white; }
        
        .btn-main {
            background: var(--primary-blue); color: white; width: 100%; max-width: 450px;
            border: none; margin-top: 24px; text-decoration: none; display: inline-block;
            box-shadow: 0 4px 14px 0 rgba(0, 86, 179, 0.2);
        }
        .btn-main:hover { background: #004494; transform: translateY(-2px); }

        .btn-secondary { background: transparent; color: var(--text-muted); border: 1px solid var(--border-color); font-size: 0.9rem; margin-top: 16px; padding: 12px 24px; }

        #question-zone h3 { color: var(--accent-pink); font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 24px; }
        #question-text { font-size: 1.4rem; font-weight: 500; min-height: 100px; max-width: 600px; color: var(--primary-blue); }

        #result-zone { display: none; }
        .score-circle { font-size: 3.5rem; font-weight: 700; color: var(--primary-blue); margin: 20px 0; }
        .gauge-container { height: 8px; background: #F1F5F9; border-radius: 10px; margin: 20px 0 40px 0; overflow: hidden; width: 100%; max-width: 400px; }
        .gauge-fill { height: 100%; width: 0%; transition: width 1.2s cubic-bezier(0.65, 0, 0.35, 1); }

        .board-ready-list { list-style: none; padding: 0; margin: 32px 0; width: 100%; }
        .board-ready-list li { padding: 16px 20px; margin-bottom: 12px; background: #F8FAFC; border-radius: 8px; font-size: 0.95rem; color: var(--primary-blue); text-align: left; }

        .reassurance { font-size: 0.85rem; color: var(--text-muted); margin-top: 20px; font-style: italic; }
        textarea { width: 100%; padding: 15px; border-radius: 8px; border: 1px solid var(--border-color); margin-top: 10px; font-family: inherit; }

        footer { padding: 60px 20px; font-size: 0.85rem; color: var(--text-muted); }
        footer a { color: var(--primary-blue); font-weight: 600; text-decoration: none; }

        @media (max-width: 600px) {
            .card { padding: 40px 24px; }
            h1 { font-size: 1.75rem; }
            #question-text { font-size: 1.2rem; }
        }
    </style>
</head>
<body>

<header>
    <a href="https://homieuxmedia.com/">
        <img src="logo-homieux.png" alt="Homieux Media" class="logo">
    </a>
</header>

<div class="container">
    <div id="setup-zone" class="card">
        <h1>Audit Rapide P√©nurie Talents</h1>
        <p class="subtitle">√âvaluez en 90 secondes le risque de p√©nurie de techniciens qualifi√©s pour legacy et GTB. Obtenez 5 reformulations concr√®tes pour votre board.</p>
        
        <p style="font-size: 0.95rem; max-width: 600px;">Cet outil est fait pour des dirigeants belges comme vous, dans l'√©nergie ou les services techniques B2B, o√π les shortages menacent la continuit√© des projets. Pas de collecte de donn√©es sensibles, pas d'engagement.</p>

        <div class="stat-box">
            üìç <strong>Contexte Belgique 2025</strong>
            En 2025, 76% des employeurs belges en √©nergie peinent √† remplir les postes, aggravant les gaps en comp√©tences hybrides.
            <br><small style="opacity:0.7">Source : ManpowerGroup 2025</small>
        </div>

        <button class="btn-main" onclick="startApp()">Commencer</button>
    </div>

    <div id="question-zone" class="card" style="display:none;">
        <h3 id="step-title">Question 1/10</h3>
        <p id="question-text"></p>
        
        <div class="btn-group">
            <button class="btn-option" onclick="handleAnswer(true)">OUI</button>
            <button class="btn-option" onclick="handleAnswer(false)">NON</button>
        </div>

        <div id="q-stat" class="stat-box" style="display:none; margin-top:30px; font-size: 0.8rem;"></div>
        
        <p class="reassurance">"Pas de bonne ou mauvaise r√©ponse. L‚Äôobjectif est de clarifier votre position strat√©gique, comme pour de nombreux dirigeants belges dans votre secteur."</p>
        
        <button class="btn-secondary" onclick="prevQuestion()" id="prev-btn" style="visibility:hidden;">‚Üê Revenir</button>
    </div>

    <div id="result-zone" class="card">
        <h1>Analyse du risque</h1>
        <div class="score-circle"><span id="score-val">0</span><small style="font-size: 1.5rem; opacity: 0.4;">/10</small></div>
        
        <div class="gauge-container">
            <div id="gauge" class="gauge-fill"></div>
        </div>

        <p id="score-msg" style="font-weight: 600; font-size: 1.2rem; color: var(--primary-blue); margin-bottom: 8px;"></p>
        <p id="score-submsg" style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 40px; max-width: 500px;"></p>

        <div class="stat-box">
            üìç <strong>Impact Secteur</strong>
            75% des acteurs √©nergie craignent que le skills gap emp√™che de tripler les renouvelables d'ici 2030.
            <br><small style="opacity:0.7">Source : Enlit Europe 2025</small>
        </div>

        <hr style="width: 100px; border: none; border-top: 2px solid var(--accent-pink); margin: 40px auto;">
        
        <h3 style="color: var(--primary-blue); font-weight: 700; margin-bottom: 8px;">Reformulations Board-Ready</h3>
        <ul id="board-list" class="board-ready-list"></ul>

        <div style="width:100%; margin-top: 20px; text-align: left;">
            <label style="font-size: 0.9rem; color: var(--primary-blue); font-weight: 600;">Lequel de ces points vous parle le plus dans votre situation actuelle ?</label>
            <textarea id="teaser-text" placeholder="Optionnel : notez ici votre priorit√©..."></textarea>
        </div>

        <a id="calendly-link" href="#" class="btn-main">R√©servons 30 min pour votre situation pr√©cise (sans engagement)</a>
        <button class="btn-secondary" onclick="generatePDF()">T√©l√©charger le compte-rendu PDF Premium</button>
    </div>
</div>

<footer>
    <a href="https://homieuxmedia.com/">Homieux Media</a><br>
    ¬© 2026 ‚Äî Accompagnement strat√©gique √©nergie & technique
</footer>

<script>
    const questions = [
        { q: "Avez-vous du mal √† recruter des techniciens capables de g√©rer √† la fois les infrastructures legacy et les syst√®mes GTB modernes ?", stat: "83% des acteurs europ√©ens en √©nergie estiment que les p√©nuries de main-d'≈ìuvre menacent la comp√©titivit√© (Enlit Europe 2025).", weight: 1.5 },
        { q: "Vos √©quipes actuelles manquent-elles de polyvalence pour legacy et GTB, causant des retards dans les audits/maintenance ?", stat: null, weight: 1 },
        { q: "Le board vous reproche-t-il une d√©pendance √† des profils rares pour ces comp√©tences hybrides ?", stat: "En 2025, 90% des op√©rateurs de transmission europ√©ens rapportent des retards de projets dus √† des p√©nuries de comp√©tences (ENTSO-E).", weight: 1.5 },
        { q: "Avez-vous explor√© le recrutement intersectoriel (e.g., construction/a√©ronautique) sans succ√®s ?", stat: null, weight: 1 },
        { q: "Vos programmes d'upskilling internes ne couvrent-ils pas assez les gaps legacy-GTB ?", stat: "D'ici 2030, l'Europe du vent aura besoin de 600 000 emplois, mais fait face √† des p√©nuries critiques en techniciens hybrides (WindEurope 2025).", weight: 1.5 },
        { q: "La concurrence attire-t-elle vos techniciens potentiels avec plus de flexibilit√© ?", stat: null, weight: 1 },
        { q: "Manquez-vous de strat√©gies pour attirer des talents via digitalisation et √©quilibre vie pro-perso ?", stat: null, weight: 1 },
        { q: "Vos tenders sont-ils impact√©s par l'absence de profils qualifi√©s pour GTB ?", stat: "72% des employeurs belges luttent pour remplir les postes, particuli√®rement en √©nergie et techniques (ManpowerGroup Q1 2026).", weight: 1 },
        { q: "Les listes de m√©tiers en p√©nurie belges (e.g., √©lectriciens industriels) ne vous aident-elles pas assez ?", stat: null, weight: 1 },
        { q: "Vos investissements en formation ne comblent-ils pas les shortages pour legacy et GTB ?", stat: null, weight: 1 }
    ];

    let currentStep = 0;
    let answers = [];

    function startApp() {
        document.getElementById('setup-zone').style.display = 'none';
        document.getElementById('question-zone').style.display = 'flex';
        showQuestion();
    }

    function showQuestion() {
        if(currentStep < questions.length) {
            document.getElementById('step-title').innerText = `Question ${currentStep + 1}/10`;
            document.getElementById('question-text').innerText = questions[currentStep].q;
            
            const statBox = document.getElementById('q-stat');
            if(questions[currentStep].stat) {
                statBox.innerHTML = `üìç ${questions[currentStep].stat}`;
                statBox.style.display = 'block';
            } else {
                statBox.style.display = 'none';
            }
            
            document.getElementById('prev-btn').style.visibility = currentStep > 0 ? 'visible' : 'hidden';
        } else {
            showResults();
        }
    }

    function handleAnswer(isYes) {
        answers[currentStep] = isYes;
        currentStep++;
        showQuestion();
    }

    function prevQuestion() {
        if(currentStep > 0) {
            currentStep--;
            showQuestion();
        }
    }

    function showResults() {
        document.getElementById('question-zone').style.display = 'none';
        document.getElementById('result-zone').style.display = 'flex';
        
        let rawScore = 0;
        answers.forEach((ans, idx) => { if(ans) rawScore += questions[idx].weight; });
        const finalScore = Math.min(10, Math.round(rawScore));
        
        document.getElementById('score-val').innerText = finalScore;
        const gauge = document.getElementById('gauge');
        const msg = document.getElementById('score-msg');
        const submsg = document.getElementById('score-submsg');
        
        let color = "#22c55e"; 
        if(finalScore >= 4 && finalScore <= 6) color = "#f59e0b";
        if(finalScore > 6) color = "#ef4444";

        msg.innerText = finalScore > 6 ? "Risque de p√©nurie critique" : (finalScore >= 4 ? "Vigilance requise" : "Risque ma√Ætris√©");
        submsg.innerText = "Un score √©lev√© indique un fort risque de p√©nurie de talents. Dans le contexte belge actuel (p√©nurie talents, cycles longs), c'est une situation observ√©e chez de nombreuses PME similaires.";

        setTimeout(() => {
            gauge.style.width = (finalScore * 10) + "%";
            gauge.style.backgroundColor = color;
        }, 100);

        const boardList = document.getElementById('board-list');
        boardList.innerHTML = "";
        
        let pool = [
            { text: "Prioriser l'upskilling interne pour combler les gaps legacy-GTB. ‚Üí Bas√© sur 29% des employeurs belges choisissant la formation (ManpowerGroup).", type: 'urg' },
            { text: "Recruter intersectoriel (construction/a√©ronautique) pour talents hybrides. ‚Üí Prouv√© chez 78% des employeurs √©nergie (Progressive Recruitment).", type: 'urg' },
            { text: "Am√©liorer l'attraction via √©quilibre vie pro-perso et digitalisation. ‚Üí 36% des employeurs citent cela comme cl√© (ManpowerGroup).", type: 'prev' },
            { text: "Partenarier avec formations belges pour reskilling. ‚Üí Contre p√©nurie de 7 000 techniciens vent d'ici 2030 (WindEurope).", type: 'urg' },
            { text: "Utiliser listes p√©nurie r√©gionales pour cibler √©lectriciens GTB. ‚Üí Align√© r√©formes belges Flandre/Wallonie.", type: 'prev' },
            { text: "Digitaliser la documentation technique pour r√©duire le temps de formation des nouveaux profils.", type: 'prev' },
            { text: "Lancer un audit externe des comp√©tences critiques pour identifier les zones de risque legacy.", type: 'urg' },
            { text: "Valoriser le r√¥le de 'Ma√Ætre-Apprentisseur' pour acc√©l√©rer le transfert de savoir legacy aux juniors.", type: 'prev' },
            { text: "Sanctualiser un budget d√©di√© au recrutement de profils hybrides avant les d√©parts seniors.", type: 'urg' },
            { text: "D√©velopper une marque employeur ax√©e sur la transition √©nerg√©tique et la GTB moderne.", type: 'prev' }
        ];

        let selected = [];
        if(finalScore >= 7) {
            selected = pool.filter(p => p.type === 'urg').slice(0, 4);
            selected.push(pool.find(p => p.type === 'prev'));
        } else {
            selected = pool.filter(p => p.type === 'prev').slice(0, 4);
            selected.push(pool.find(p => p.type === 'urg'));
        }
        
        selected.forEach(item => {
            let li = document.createElement('li');
            li.innerText = item.text;
            boardList.appendChild(li);
        });

        const calLink = `https://calendly.com/homieuxmedia/diagnostic?text=Mon%20score%20est%20${finalScore}/10`;
        document.getElementById('calendly-link').href = calLink;
    }

    function generatePDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        const scoreVal = document.getElementById('score-val').innerText;
        const scoreMsg = document.getElementById('score-msg').innerText;
        const dateStr = new Date().toLocaleDateString('fr-BE');
        const userNote = document.getElementById('teaser-text').value;

        // Configuration Couleurs Homieux Media
        const primaryBlue = [0, 86, 179];
        const accentPink = [237, 81, 194];
        const darkBlue = [0, 4, 66];
        const lightBg = [248, 250, 252];

        // --- EN-TETE ---
        doc.setFillColor(...primaryBlue);
        doc.rect(0, 0, 210, 45, 'F');
        
        doc.setTextColor(255, 255, 255);
        doc.setFont("helvetica", "bold");
        doc.setFontSize(22);
        doc.text("RAPPORT D'AUDIT STRAT√âGIQUE", 20, 25);
        doc.setFontSize(12);
        doc.setFont("helvetica", "normal");
        doc.text("P√©nurie de Talents & Comp√©tences GTB/Legacy", 20, 33);
        
        // --- BLOC SCORE ---
        doc.setFillColor(...lightBg);
        doc.roundedRect(15, 55, 180, 40, 3, 3, 'F');
        
        doc.setTextColor(...primaryBlue);
        doc.setFont("helvetica", "bold");
        doc.setFontSize(14);
        doc.text("VOTRE SCORE DE RISQUE :", 25, 70);
        
        // Couleur dynamique du score
        let scoreColor = parseInt(scoreVal) > 6 ? [239, 68, 68] : (parseInt(scoreVal) >= 4 ? [245, 158, 11] : [34, 197, 94]);
        doc.setTextColor(...scoreColor);
        doc.setFontSize(36);
        doc.text(`${scoreVal}/10`, 25, 85);
        
        doc.setFontSize(14);
        doc.text(scoreMsg.toUpperCase(), 80, 85);

        // --- SECTION : R√âPONSES D√âTAILL√âES ---
        let y = 110;
        doc.setTextColor(...darkBlue);
        doc.setFontSize(14);
        doc.setFont("helvetica", "bold");
        doc.text("D√©tail de l'√©valuation", 20, y);
        y += 8;

        doc.setDrawColor(...primaryBlue);
        doc.setLineWidth(0.5);
        doc.line(20, y, 190, y);
        y += 10;

        doc.setFontSize(9);
        doc.setFont("helvetica", "normal");
        
        questions.forEach((item, index) => {
            const answer = answers[index] ? "OUI" : "NON";
            const qText = doc.splitTextToSize(`${index + 1}. ${item.q}`, 140);
            
            // Background zebra pour lisibilit√©
            if(index % 2 === 0) {
                doc.setFillColor(252, 252, 252);
                doc.rect(15, y - 4, 180, (qText.length * 5) + 4, 'F');
            }

            doc.setTextColor(...darkBlue);
            doc.text(qText, 20, y);
            
            doc.setFont("helvetica", "bold");
            doc.setTextColor(answers[index] ? 200 : 100, 50, 50); // Rouge si OUI (risque)
            doc.text(answer, 175, y);
            
            doc.setFont("helvetica", "normal");
            y += (qText.length * 5) + 3;
            
            // Protection d√©passement page
            if (y > 270) { doc.addPage(); y = 20; }
        });

        // --- SECTION : RECOMMANDATIONS ---
        y += 10;
        if (y > 230) { doc.addPage(); y = 20; }
        
        doc.setTextColor(...accentPink);
        doc.setFontSize(14);
        doc.setFont("helvetica", "bold");
        doc.text("Recommandations Prioritaires du Board", 20, y);
        y += 10;

        let listItems = document.querySelectorAll('#board-list li');
        listItems.forEach(li => {
            doc.setFillColor(...lightBg);
            const recText = doc.splitTextToSize(li.innerText, 160);
            doc.roundedRect(18, y - 4, 174, (recText.length * 5) + 4, 2, 2, 'F');
            
            doc.setTextColor(...primaryBlue);
            doc.setFont("helvetica", "normal");
            doc.setFontSize(10);
            doc.text(recText, 25, y);
            y += (recText.length * 5) + 6;
        });

        // --- NOTE UTILISATEUR & CTA ---
        if(userNote) {
            y += 5;
            doc.setTextColor(...darkBlue);
            doc.setFont("helvetica", "italic");
            doc.setFontSize(9);
            doc.text("Votre priorit√© not√©e : " + userNote, 20, y);
            y += 10;
        }

        // Pied de page
        doc.setFillColor(...darkBlue);
        doc.rect(0, 280, 210, 17, 'F');
        doc.setTextColor(255, 255, 255);
        doc.setFontSize(8);
        doc.text(`G√©n√©r√© le ${dateStr} pour Homieux Media ‚Äî Expert en recrutement technique B2B`, 20, 290);
        doc.text("homieuxmedia.com", 170, 290);

        doc.save(`Audit_Homieux_Media_${dateStr.replace(/\//g,'-')}.pdf`);
    }
</script>

</body>
</html>
